- var filminformasjon = filminformasjon;
- var castinfo = castinfo;
- var videos = videos;
- var listOfPersons = listOfPersons;
- var videoTrailers = [];
- var genres = [];
- var actors = [];
- var counter = 0;
- var director;
- var screenplay;

each item in filminformasjon.genres
  - genres += item.name + " ";
  - if(counter == 1)
   - break;
  - counter++;

each item in castinfo.crew
  - if(item.job == 'Director')
    - director = item.name;
    - break;

each item in castinfo.crew
  - if(item.job == 'Screenplay')
    - screenplay = item.name;
    - break;

each item in castinfo.cast 
  - if (item.known_for_department == 'Acting')
    - var info = {id:item.id, navn:item.name, character:item.character, picture:'https://www.themoviedb.org/t/p/w600_and_h900_bestv2' + item.profile_path, imdbID:""}
    - if(item.profile_path == null)
        - info.picture = '/images/imgactors/altpicture.svg'
    - actors.push(info);

each item in videos.results
  - if(item.type == "Trailer" && item.site == "YouTube")
    - videoTrailers.push(item.key);
    - break;

each actor in actors
  each person in listOfPersons 
    - if(actor.id == person.id)
      - actor.imdbID = person.imdb_id;

include ../includes/head.pug
include ../includes/nav.pug


body
  .overlay
    .container
      // Grid
      div(uk-grid='').film_oversikt
        // Poster image
        .uk-width-1-2.uk-flex-middle.filminfo_img
          img(src=`https://www.themoviedb.org/t/p/w600_and_h900_bestv2/${filminformasjon.poster_path}` alt='')
        // Informasjon on film
        .uk-width-1-3
          .uk-padding.uk-padding-remove-left.uk-padding-remove-right.filminfo_text_wrap
              h2= filminformasjon.title
                a(href='https://www.youtube.com/watch?v=dQw4w9WgXcQ&ab_channel=RickAstleyVEVO' width="40" height ="40" uk-icon='heart')
                a(href='https://www.youtube.com/watch?v=dQw4w9WgXcQ&ab_channel=RickAstleyVEVO' width="40" height ="40" uk-icon='star')
              h3= `${filminformasjon.release_date} ${genres}`
              h3= `${filminformasjon.runtime} Minutes`
              h1= `${filminformasjon.vote_average*10}%`
              h2 Overview
              p= filminformasjon.overview
              .direc(uk-grid='')
                .uk-width-1-2
                  p Director
                  a(href='')
                    b= `${director}`
                .uk-width-1-2
                  p Screenplay
                  a(href='')
                    b= `${screenplay}` 
      // Slider
      .uk-grid
        .uk-width-5-6.uk-align-center(style='max-width: 1150px;')
          .uk-slider-container-offset(uk-slider='')
            .uk-position-relative.uk-visible-toggle.uk-light(tabindex='-1')
              ul.uk-slider-items.uk-grid(class='uk-child-width-1-5@s uk-grid-match')
                each item in actors
                  li
                    a(href=`https://www.imdb.com/name/${item.imdbID}/`)
                      .uk-card.uk-card-default
                        .uk-card-media-top
                          img(src=`${item.picture}` alt='' width='100%')
                        .uk-card-body
                          h3.uk-card-title= `${item.navn}`
                          p= `${item.character}`
              a.uk-position-center-left.uk-position-small.uk-hidden-hover(href='#' uk-slidenav-previous='' uk-slider-item='previous')
              a.uk-position-center-right.uk-position-small.uk-hidden-hover(href='#' uk-slidenav-next='' uk-slider-item='next')
            ul.uk-slider-nav.uk-dotnav.uk-flex-center.uk-margin
          // Reviews og Media
          div
            
          ul(uk-tab='')
            li
              a(href='#') Reviews
            li
              a(href='#') Media

          ul.uk-switcher.uk-margin
            li
              article.uk-comment.uk-comment-primary.uk-margin-top
                header.uk-comment-header
                  .uk-grid-medium.uk-flex-middle(uk-grid='')
                    .uk-width-auto
                      img.uk-comment-avatar(src='images/avatar.jpg' width='80' height='80' alt='')
                    .uk-width-expand
                      h4.uk-comment-title.uk-margin-remove
                        a.uk-link-reset(href='#') Author
                      ul.uk-comment-meta.uk-subnav.uk-subnav-divider.uk-margin-remove-top
                        li
                          a(href='#') 12 days ago
                .uk-comment-body
                  p
                    | Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam erat, sed diam voluptua. At vero eos et accusam et justo duo dolores et ea rebum. Stet clita kasd gubergren, no sea takimata sanctus est Lorem ipsum dolor sit amet.
            li
              iframe(width='1280' height='720' src=`https://www.youtube.com/embed/${videoTrailers[0]}?autoplay=0` allowframeborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen)

      include ../includes/footer.pug